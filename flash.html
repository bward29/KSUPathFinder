<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Academic Advisor</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
        integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Bona+Nova+SC&display=swap">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        body,
        html {
            height: 100%;
            margin: 0;
            background-color: #1B2A47;
            color: white;
            overflow: hidden;
        }

        .container-fluid {
            padding: 0;
            height: 100vh;
        }

        .row {
            margin: 0;
            height: 100%;
        }

        .chat {
            height: 100%;
            padding: 0;
        }

        .card {
            height: 100vh;
            border-radius: 0 !important;
            background-color: rgba(0, 0, 0, 0.4) !important;
            margin: 0;
            border: none;
        }

        .msg_card_body {
            overflow-y: auto;
            height: calc(100vh - 140px);
            /* Adjust for header and footer */
            scrollbar-width: thin;
            scrollbar-color: #888 #f1f1f1;
            padding-bottom: 8px !important;
            /* Added to ensure messages don't get cut off at the bottom */
        }

        .msg_card_body::-webkit-scrollbar {
            width: 5px;
        }

        .msg_card_body::-webkit-scrollbar-track {
            background: rgba(241, 241, 241, 0.1);
        }

        .msg_card_body::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 5px;
        }

        .card-header {
            border-radius: 0 !important;
            border-bottom: 0 !important;
            background-color: rgba(0, 0, 0, 0.3) !important;
            padding: 15px !important;
        }

        .card-footer {
            border-radius: 0 !important;
            border-top: 0 !important;
            background-color: rgba(0, 0, 0, 0.3) !important;
            padding: 10px 20px !important;
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 100;
            /* Ensure footer stays on top */
        }

        .type_msg {
            background-color: rgba(0, 0, 0, 0.3) !important;
            border: 0 !important;
            color: white !important;
            height: 60px !important;
            overflow-y: auto;
            border-radius: 15px 0 0 15px !important;
            padding: 15px !important;
        }

        .type_msg:focus {
            box-shadow: none !important;
            outline: 0px !important;
        }

        .send_btn {
            border-radius: 0 15px 15px 0 !important;
            background-color: rgba(0, 0, 0, 0.3) !important;
            border: 0 !important;
            color: white !important;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .send_btn:hover {
            background-color: rgba(255, 255, 255, 0.1) !important;
        }

        .user_img {
            height: 70px;
            width: 70px;
            border: 1.5px solid #f5f6fa;
            border-radius: 50%;
        }

        .user_img_msg {
            height: 40px;
            width: 40px;
            border: 1.5px solid #f5f6fa;
            border-radius: 50%;
        }

        .img_cont {
            position: relative;
            height: 70px;
            width: 70px;
        }

        .img_cont_msg {
            height: 40px;
            width: 40px;
        }

        .online_icon {
            position: absolute;
            height: 15px;
            width: 15px;
            background-color: #4cd137;
            border-radius: 50%;
            bottom: 0.2em;
            right: 0.4em;
            border: 1.5px solid white;
        }

        .user_info {
            margin-top: auto;
            margin-bottom: auto;
            margin-left: 15px;
        }

        .user_info span {
            font-size: 20px;
            color: white;
        }

        .user_info p {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            margin: 0;
        }

        .back-link {
            position: absolute;
            right: 20px;
            top: 25px;
        }

        .back-link a {
            color: white;
            text-decoration: underline;
            font-size: 16px;
            font-weight: bold;
            font-family: serif;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 8px 15px;
            border-radius: 15px;
            transition: background-color 0.3s;
        }

        .back-link a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .msg_cotainer {
            margin-top: auto;
            margin-bottom: 60px !important;
            margin-left: 10px;
            border-radius: 25px;
            background-color: rgb(82, 172, 255);
            padding: 10px 15px;
            position: relative;
            max-width: 80%;
            word-wrap: break-word;
        }

        .msg_cotainer_send {
            margin-top: auto;
            margin-bottom: auto;
            margin-right: 10px;
            border-radius: 25px;
            background-color: #58cc71;
            padding: 10px 15px;
            position: relative;
            max-width: 80%;
            word-wrap: break-word;
        }

        .msg_time {
            position: absolute;
            left: 0;
            bottom: -18px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 10px;
        }

        .msg_time_send {
            position: absolute;
            right: 0;
            bottom: -18px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 10px;
        }

        .typing-indicator span {
            height: 8px;
            width: 8px;
            background-color: #fff;
            border-radius: 50%;
            display: inline-block;
            margin: 0 1px;
            animation: typing 1.5s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0% {
                transform: translateY(0px);
                opacity: 0.5;
            }

            50% {
                transform: translateY(-5px);
                opacity: 1;
            }

            100% {
                transform: translateY(0px);
                opacity: 0.5;
            }
        }

        .chat-message {
            margin-bottom: 30px !important;
            position: relative;
            clear: both;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .col-md-8 {
                flex: 0 0 100%;
                max-width: 100%;
            }

            .msg_card_body {
                height: calc(100vh - 130px);
            }
        }
    </style>
</head>

<body>
    <div class="container-fluid h-100">
        <div class="row justify-content-center h-100">
            <div class="col-md-12 chat">
                <div class="card">
                    <div class="card-header msg_head">
                        <div class="d-flex bd-highlight">
                            <div class="img_cont">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/f/f3/Kent_State_K_logo.png"
                                    class="rounded-circle user_img" alt="AI Academic Advisor Logo">
                                <span class="online_icon"></span>
                            </div>
                            <div class="user_info">
                                <span>AI Academic Advisor</span>
                                <p>Ask me anything about courses, majors, or academic life!</p>
                            </div>
                            <div class="back-link">
                                <a href="/">Back to Home</a>
                            </div>
                        </div>
                    </div>
                    <div id="messageFormeight" class="card-body msg_card_body">
                        <!-- Welcome message will be added dynamically -->
                    </div>
                    <div class="card-footer">
                        <form id="messageArea" class="input-group">
                            <input type="text" id="text" name="msg" placeholder="Type your message..."
                                autocomplete="off" class="form-control type_msg" required />
                            <div class="input-group-append">
                                <button type="submit" id="send" class="input-group-text send_btn" title="Send Message">
                                    <i class="fas fa-location-arrow" aria-hidden="true"></i>
                                    <span class="sr-only">Send</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            // Academic response database
            const academicResponses = {
                greetings: [
                    "Hello! How can I assist you with your academic questions today?",
                    "Hi there! I'm here to help with any academic-related questions you might have.",
                    "Good day! What academic information are you looking for today?"
                ],
                thanks: [
                    "You're welcome! Is there anything else I can help you with?",
                    "Glad I could help! Do you have any other questions?",
                    "It's my pleasure to assist you. What else would you like to know about academic life?"
                ],
                courses: [
                    "We offer a wide range of courses across multiple disciplines. Could you specify which department you're interested in?",
                    "Our course catalog includes both undergraduate and graduate options. Are you looking for a specific level or subject area?",
                    "Popular courses this semester include Data Science 101, Introduction to Psychology, and Business Ethics. Would you like more information on any of these?"
                ],
                specific_courses: {
                    cs35101: "CS 35101 - Computer Organization\n\nCredits: 3\n\nDescription: Computer system organization, including performance measures, instruction sets, computer arithmetic, central processing unit, pipelining, memory hierarchy and parallel processors.\n\nPrerequisites: Minimum C grade in the following courses: CS 10062 or CS 13001; or CS 13011 and CS 13012.\n\nOffered: Fall, Spring, Summer",

                    cs23022: "CS 23022 - Discrete Structures for Computer Science\n\nCredits: 3\n\nDescription: Discrete structures for computer scientists with a focus on: mathematical reasoning, combinatorial analysis, discrete structures, algorithmic thinking, applications and modeling.\n\nPrerequisites: Minimum C grade in MATH 11009 or MATH 11010 or MATH 11022, or ALEKS score of 78.\n\nOffered: Fall, Spring, Summer",

                    cs10051: "CS 10051 - Computer Science Principles\n\nCredits: 3\n\nDescription: An introductory, broad and hands-on coverage of aspects of computer science, including algorithms, problem solving, operating systems concepts, computer architecture, programming languages and modern applications. Three-credit lecture with one-credit lab.\n\nPrerequisites: None\n\nOffered: Fall, Spring",

                    bsci10001: "BSCI 10001 - Human Biology\n\nCredits: 3\n\nDescription: Study of the scientific method and life's properties, emphasizing human biology. Topics include energy, genetics, reproduction, development disease, nutrition and physical fitness in humans. This course may not be used to fulfill major or minor requirements in the following programs: B.A. Biology, B.S. Biology, B.S. Biotechnology, B.S. Botany, B.S. Environmental and Conservation Biology, B.S. Medical Laboratory Science, B.S. Zoology and the Biological Sciences minor.\n\nPrerequisites: None\n\nOffered: Fall",

                    bsci10002: "BSCI 10002 - Life on Planet Earth\n\nCredits: 3\n\nDescription: Explores the fascinating breadth of life on Earth including the unique ecology and survival strategies of animals, plants and microbes in their natural habitats. This course may not be used to fulfill major or minor requirements in the following programs: B.A. Biology, B.S. Biology, B.S. Biotechnology, B.S. Botany, B.S. Environmental and Conservation Biology, B.S. Medical Laboratory Science, B.S. Zoology and the Biological Sciences minor.\n\nPrerequisites: None\n\nOffered: Fall, Spring"
                },
                majors: [
                    "We offer over 50 undergraduate majors and 30 graduate programs. Some popular choices include Computer Science, Business Administration, and Psychology.",
                    "Our most competitive majors include Engineering, Nursing, and Computer Science. Each has specific admission requirements.",
                    "When choosing a major, consider your interests, career goals, and academic strengths. Would you like to discuss a specific major?"
                ],
                registration: [
                    "Registration for the next semester typically opens 2 months before classes begin. Current students register based on credit hours completed.",
                    "To register for classes, log in to the student portal and use the course registration tool. You'll need your student ID and password.",
                    "Registration deadlines are strictly enforced. Late registration may result in additional fees."
                ],
                deadlines: [
                    "Important upcoming deadlines: Course registration (April 15), Tuition payment (August 1), Drop/Add period (First two weeks of semester).",
                    "Scholarship application deadlines vary by program, but most university scholarships are due by February 1 for the following academic year.",
                    "Thesis and dissertation submission deadlines are posted on the graduate school website."
                ],
                financial_aid: [
                    "Financial aid options include grants, scholarships, work-study, and loans. Have you submitted your FAFSA yet?",
                    "Scholarship applications are evaluated based on academic achievement, financial need, and sometimes specific criteria set by donors.",
                    "Our financial aid office offers one-on-one counseling to help students maximize their aid packages and minimize debt."
                ],
                campus: [
                    "Campus resources include the library, tutoring center, writing center, counseling services, and career center. All are free for enrolled students.",
                    "The student health center provides medical care, mental health services, and wellness programs.",
                    "Our library offers 24/7 access during finals week, with librarians available to help with research questions."
                ],
                default: [
                    "That's an interesting question about academic life. Could you provide more specific details about what you're looking for?",
                    "I'd be happy to help with that. Can you tell me more about what specific academic information you need?",
                    "I'm here to assist with academic questions. Could you please clarify what aspect of university life you're interested in learning about?"
                ]
            };

            // Function to generate responses based on keywords
            function generateResponse(query) {
                query = query.toLowerCase().trim();

                // Handle empty messages
                if (query === "") {
                    return "I didn't catch that. Could you please repeat your question?";
                }

                // Check for greetings first
                if (query.match(/^(hi|hello|hey|greetings|howdy|hola)/i)) {
                    return getRandomResponse(academicResponses.greetings);
                }

                // Check for thank you messages
                if (query.match(/(thank|thanks|thx|ty)/i)) {
                    return getRandomResponse(academicResponses.thanks);
                }

                // Check for specific courses
                const queryNoSpaces = query.replace(/\s+/g, "").toLowerCase();

                if (queryNoSpaces.includes("cs35101") || query.toLowerCase().includes("computer organization")) {
                    return academicResponses.specific_courses.cs35101;
                }
                else if (queryNoSpaces.includes("cs23022") || query.toLowerCase().includes("discrete structures")) {
                    return academicResponses.specific_courses.cs23022;
                }
                else if (queryNoSpaces.includes("cs10051") || query.toLowerCase().includes("computer science principles")) {
                    return academicResponses.specific_courses.cs10051;
                }
                else if (queryNoSpaces.includes("bsci10001") || query.toLowerCase().includes("human biology")) {
                    return academicResponses.specific_courses.bsci10001;
                }
                else if (queryNoSpaces.includes("bsci10002") || query.toLowerCase().includes("life on planet earth")) {
                    return academicResponses.specific_courses.bsci10002;
                }

                // Check for academic topics
                if (query.includes("course") || query.includes("class") || query.includes("semester") || query.includes("curriculum") || query.includes("prerequisite")) {
                    return getRandomResponse(academicResponses.courses);
                } else if (query.includes("major") || query.includes("minor") || query.includes("degree") || query.includes("program") || query.includes("concentration")) {
                    return getRandomResponse(academicResponses.majors);
                } else if (query.includes("register") || query.includes("registration") || query.includes("sign up") || query.includes("enroll")) {
                    return getRandomResponse(academicResponses.registration);
                } else if (query.includes("deadline") || query.includes("due date") || query.includes("when is") || query.includes("schedule")) {
                    return getRandomResponse(academicResponses.deadlines);
                } else if (query.includes("financial") || query.includes("scholarship") || query.includes("tuition") || query.includes("fafsa") || query.includes("aid") || query.includes("grant") || query.includes("loan")) {
                    return getRandomResponse(academicResponses.financial_aid);
                } else if (query.includes("campus") || query.includes("resource") || query.includes("facility") || query.includes("library") || query.includes("dorm") || query.includes("housing")) {
                    return getRandomResponse(academicResponses.campus);
                } else {
                    return getRandomResponse(academicResponses.default);
                }
            }

            // Function to get a random response from a category
            function getRandomResponse(responseArray) {
                const randomIndex = Math.floor(Math.random() * responseArray.length);
                return responseArray[randomIndex];
            }

            // Function to get current time formatted as HH:MM
            function getCurrentTime() {
                const date = new Date();
                const hours = date.getHours().toString().padStart(2, '0');
                const minutes = date.getMinutes().toString().padStart(2, '0');
                return hours + ":" + minutes;
            }

            // Function to safely encode HTML entities
            function escapeHtml(text) {
                if (!text) return '';
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            // Function to format message text with line breaks for readability
            function formatMessageText(text) {
                if (!text) return '';
                return text.replace(/\n/g, '<br>');
            }

            // Display welcome message
            function showWelcomeMessage() {
                const welcomeHtml = '<div class="chat-message d-flex justify-content-start mb-4"><div class="img_cont_msg"><img src="https://mascothalloffame.com/wp-content/uploads/bb-plugin/cache/kentstate-e1678839414693-circle.png" class="rounded-circle user_img_msg" alt="AI Assistant"></div><div class="msg_cotainer">Welcome to the AI Academic Advisor! I can help with questions about courses, majors, registration, deadlines, financial aid, and campus resources. How can I assist you today?<span class="msg_time">Now</span></div></div>';
                $("#messageFormeight").append(welcomeHtml);
            }

            // Show welcome message on page load
            showWelcomeMessage();

            // Function to show typing indicator
            function showTypingIndicator() {
                const typingHtml = '<div id="typing-indicator" class="chat-message d-flex justify-content-start mb-4"><div class="img_cont_msg"><img src="https://mascothalloffame.com/wp-content/uploads/bb-plugin/cache/kentstate-e1678839414693-circle.png" class="rounded-circle user_img_msg" alt="AI Assistant"></div><div class="msg_cotainer">Thinking<div class="typing-indicator"><span></span><span></span><span></span></div></div></div>';
                $("#messageFormeight").append(typingHtml);
                $("#messageFormeight").scrollTop($("#messageFormeight")[0].scrollHeight);
            }

            // Function to remove typing indicator
            function removeTypingIndicator() {
                $("#typing-indicator").remove();
            }

            // Function to handle message sending (client-side only)
            function sendMessage(message) {
                if (!message.trim()) return; // Don't send empty messages

                const str_time = getCurrentTime();

                // Create and display user message
                const safeText = escapeHtml(message);
                const userHtml = '<div class="chat-message d-flex justify-content-end mb-4"><div class="msg_cotainer_send">' + safeText + '<span class="msg_time_send">' + str_time +
                    '</span></div><div class="img_cont_msg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6e/Antu_amarok_artist.svg/1920px-Antu_amarok_artist.svg.png" class="rounded-circle user_img_msg" alt="User"></div></div>';

                $("#text").val(""); // Clear input field
                $("#messageFormeight").append(userHtml);
                $("#messageFormeight").scrollTop($("#messageFormeight")[0].scrollHeight);

                // Show typing indicator
                showTypingIndicator();

                // Simulate processing delay for more realistic feel
                setTimeout(function () {
                    // Remove typing indicator
                    removeTypingIndicator();

                    // Generate response locally in the browser
                    const response = generateResponse(message);

                    // Format and display AI response
                    const safeResponse = escapeHtml(response);
                    const formattedResponse = formatMessageText(safeResponse);
                    const botHtml = '<div class="chat-message d-flex justify-content-start mb-4"><div class="img_cont_msg"><img src="https://mascothalloffame.com/wp-content/uploads/bb-plugin/cache/kentstate-e1678839414693-circle.png" class="rounded-circle user_img_msg" alt="AI Assistant"></div><div class="msg_cotainer">' + formattedResponse + '<span class="msg_time">' + getCurrentTime() + '</span></div></div>';

                    $("#messageFormeight").append(botHtml);

                    // Ensure proper scrolling to show the new message
                    setTimeout(function () {
                        $("#messageFormeight").scrollTop($("#messageFormeight")[0].scrollHeight);
                    }, 100); // Short delay to ensure DOM is updated
                }, Math.random() * 1000 + 500); // Random delay between 0.5-1.5 seconds for more realism
            }

            // Handle form submission
            $("#messageArea").on("submit", function (event) {
                event.preventDefault();
                const msg = $("#text").val();
                sendMessage(msg);
            });

            // Add event listener for Enter key
            $("#text").keypress(function (e) {
                if (e.which == 13 && !e.shiftKey) {
                    $("#messageArea").submit();
                    return false;
                }
            });
        });
    </script>
</body>

</html>